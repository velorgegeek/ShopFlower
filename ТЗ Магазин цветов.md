# Техническое задание: [Магазин цветов]

**Студент:** Медведев Егор Евгеньевич

**Группа:** 2407сб2

---

## 1. Описание проекта

### 1.1 Название системы
Магазин цветов


### 1.2 Назначение
Система предназначена для автоматизации работы магазина цветов. Позволяет пользователям дистанционно купить цветы, регистрировать пользователей, управлять складом цветов, а также обрабатывать оплату заказа.

---

## 2. Функциональные требования

### 2.1 Основные функции системы

#### Функция 1: Управление каталогом товара
- **Описание:** Администратор добавляет, редактирует и удаляет товары из каталога
- **Входные данные:** товар
- **Результат:** обновленная бд товаров
  
### Функция 2: Оформление заказа
- **Описание** Пользователь выбирает товары, добавляет в корзину и оформляет заказ
- **Входные данные:** Пользователь, корзина с товарами
- **Результат** Созданный заказ

#### Функций 3: Статистика
- **Описание:** Администратор выводит статистику(линейная, диаграмма) по разным товарам/заказам
- **Входные данные:** Товары,заказы
- **Результат:** выведена статистика

#### Функция 4: Оплата товара
- **Описание:** Оплачивается покупка товара, пользователь оплачивает товар через оплату картой
- **Входные данные:** Номер карты,товары,которые хочет купить, пользователь 
- **Результат:** Пользователь получает чек и в последствии товар
#### Функция 5: Регистрация пользователя
- **Описание:** Пользователь может зарегестрироваться в нашем приложении
- **Входные данные:** Номер,Почта,Имя Фамилия Отчество,Пароль
- **Результат:** Пользователь зарегестрировался в приложении.

---

## 3. Структура базы данных

### Таблица 1: Sale (Покупка)

**Описание:** для хранения заявки 

**Поля:**
- `id sale` (int, PK) — [идентификатор покупки]
- `id user`(int , FK) - [Уникальный идентификатор юзера]
- `DateCreate` (DateTime) — [Дата покупки]
- `total amount`(int) -[общая сумма покупки]
- `status` (string) - Статус заказа
**связи:**
-`id user` - user.id user cвязь один-ко-многим с таблицей `user`(Один клиент может быть во множество продажей)


### Таблица 2: products(Товар)
**Описание:** Хранит общую информацию о товаре
**Поля:**
- `id products` (int, PK) — [уникальный идентификатор товара]
- `name` (str) - [имя продукта]
- `id category`(int,FK) - [Уникальный ид категории]

**связи:**
- Связь один-ко-многим с таблицей `сategory product` (одна категория может у множество товаров)

### Таблица 3: ProductVariation(вариации продукта)
**Описание** Хранит вариации продуктов
- `id var`(int,PK) - Уникальный идентификатор вариации
- `id product`(int ,FK) - Уникальный идентификатор товара
- `price` (int) - цена товара
- `stock` (int) - Сколько осталось на складе
- `image_url` (str) - Ссылка на фотографию
- `description` (str) - описание вариации

### Таблица 4: category products(Категории товаров)
**Описание:** Хранит категорию товара
**Поля:**
- `id category`(int, PK) - уникальный идентификатор категории
- `name` (string) - [Название категории]

### Таблица 5: ProductsInSale(Товары в продажах)
**Описание:** Связывает таблицу товары и заказы
**Поля:**
- `id var` (int,FK) - [Уникальный ид вариации товара]
- `id sale` (int, FK) - [Уникальный ид покупки]
- `quantity`(int) - [Сколько товара в заказе]
- 
**Связи:**
- `id var` - ProductVariation.id var Связь один-ко-многим с таблицей `ProductVariation`
- `id sale` - sale.id sale  Связь один-ко-многим с таблицей `sale`


### Таблица 6: Transaction (Транзации)
**Описание:** Хранит информацию о транзакциях
**Поля:**
- `id Transaction`-(int, PK) - [Уникальный идентификатор транзакции]
- `type Transaction` - (str) - [Тип транзакции]
- `id user` -(int,FK) - [Уникальный идентификатор юзера]
- `id sale` - (int,FK) - [Уникальный идентификатор заказа]
- `DataCreate` - (DateTime) - [Дата создания транзакции]

**Связи:**
- `id user`-user.id user cвязь один-ко-многим с таблицей `user`(Один клиент может быть во множество транзакций)
- `id sale` - sale.id sale cвязь один-к-одному с таблицей `id sale`(Одна продажа может иметь одну транзакцию) 


### Таблица 7: User (Клиент)
**Описание:** хранение каждого юзера
**Поля:**
- `id user` (int, PK) - [Уникальный идентификатор юзера]
- `email` (string) - [Почта пользователя]
- `phone` (string) - [Телефон пользователя]
- `fio` (string) - [Фио пользователя]
- `HashPassword`(string) - [Пароль в виде хэша]
- `Role` - [Роль пользователя]
### Таблица 8: ProductInShoppingCart(Корзина)
**Описание:** Хранение корзины
**Поля:**
 - `id ProductVariation`(int,FK) - [ид вариации]
 - `id user`(int,FK) - [ид юзера]
 - `Quantity`(int) - [Сколько продукта в корзине]

## 4. Основные формы приложения

#### Форма 1: ProductCatalogWindow
**Назначение:** [Просмотр возможных продуктов для покупки]
**Элементы управления**
- ListBox -[Отображение продуктов]
 **Действия**
- При нажатии на товар открывает окно товара

#### Форма 2: ProductCart
**Назначение:**[Детальный просмотр карточки товара]
**Элементы управления**
- TextBlock - [Название товара]
- image - [Фотография товара]
- RadioButton - [Для выбора вариации]
**Действия**
- Кнопка "[Добавить в корзину]" - Добавляет в корзину продукт
- Кнопка "[Купить]" - открывает форму с корзиной
- Кнопка "[Перейти в корзину]" - открывает форму с козиной с юзер корзиной

#### Форма 3: ShoppingCart
**Назначение** [Корзина для оплаты]
**Элементы управления**
- ListBox - [Для отображения товаров]
- TextBlock - [Название товара]
- TextBlock - [Кол-во товара]
**Действия**
-   Кнопка "[+]" - Добавляет значение этого товара в корзине
-   Кнопка "[-]" - Уменьшает значение этого товара
-   Кнопка "[x] - Удаляет из каталога 
-   Кнопка "Оплатить" - перебрасывает на оплату
#### Форма 4: PaymentWindow
**Назначение** [Оплата]
**Элементы управления**
- TextBox - [Номер карта]
- TextBox - [Месяц годности карты]
- TextBox - [Год карты]
- TextBox - [CVС]
- TextBox - [стоимость заказа]
**Действия**
- Кнопка "Заплатить" - Производит оплату
- Кнопка "Отмена" - Закрывает форму
#### Форма 5: DataGridWindow[Записи]
**Назначение** [Показывать записи]
**Элементы управления**
- TabControl - [Перемещение между DataGrid]
- DataGrid - [Вывод записей]
**Действия**
- Кнопка "Закрыть" - закрывает форму
#### Форма 6: StatisticsWindow[Статистика]
**Назначение:** [Вывод статистики]
**Элементы управления**
- ComboBox - [тип отчета]
- DatePicker - [выбор начала для фильтра]
- DatePicker - [выбор конца для фильтра]
- PlotView - [Место для графиков]
**Действия:**
-Кнопка "[применить фильтр]" -[Выводит статистику по этому фильтру]
-Кнопка "[сбросить]" - [сбрасывает фильтры]
-Кнопка "[Закрыть]" - [Закрывает форму]

### Форма 7: AuthWindow[Авторизация]
**Назначение** [Вход пользователя в программу]
**Элементы управленияе**
- TextBlock - [Логин]
- PasswordBox -[Пароль]
**Действия:**
- Кнопка "Войти" - [Вход в приложение]
- Кнопка "зарегистрироваться" - [регистрация нового пользователя]
### Форма 8: RegistrationWindow[Регистрация]
**Элемент управления**

**Действия:**
### Форма 9: AdminProductWindow[Окно с продуктами]
**Назначение** [Отдельная форма для взаимодействием с продуктами (Редактировоние/Добавление)]
**Действия**
- Кнопка "Добавить вариацию" - открывает AddVariationProductWindow
- Кнопка "Изменить продукт" - открывает EditProductWindow
- Кнопка "Добавить продукт" - открывает AddProductWindow
### Форма 10: AddProductWindow [Добавить продукт]
**Назначение** Добавления продукта
**Элемент управления**
- TextBlock - Название продукта
- TextBlock - Описание вариации
- TextBlock - Цена
- TextBlock - Остаток на складе
- ComboBox - Выбор категории товара 
- TextBox - Путь до фотографии
**Действия**
- Кнопка "Фотография" - Открывает папку откуда мы должны задать путь до фотографии
- Кнопка "Отмена" - Закрывает окно
- Кнопка "Сохранить" - добавляет новый продукт(с 1 вариацией)
### Форма 11: EditProductWindow[Редактировать продукт]
**Назначение** Редактирование продукта
**Элемент управления**
- ComboBox - Выбор продукта
- TextBlock - Название продукта
- ComboBox - Выбор категории товара 
- ComboBox - Выбор Вариации
- TextBlock - Описание вариации
- TextBlock - Цена
- TextBlock - Остаток на складе
- TextBox - Путь до фотографии
**Действия**
- Кнопка "Фотография" - Открывает папку откуда мы должны задать путь до фотографии
- Кнопка "Отмена" - Закрывает окно
- Кнопка "Сохранить" - редактирует продукт
### Форма 12: AddVariationProductWindow
**Назначение** Добавление вариации продукта
**Элемент управления**
- ComboBox - Выбор продукта
- TextBlock - Описание вариации
- TextBlock - Цена
- TextBlock - Остаток на складе
- TextBox - Путь до фотографии
**Действия**
- Кнопка "Фотография" - Открывает папку откуда мы должны задать путь до фотографии
- Кнопка "Отмена" - Закрывает окно
- Кнопка "Сохранить" - добавляет вариацию
### Форма 13: AdminWindoW[Окно админа]
**Назначение** Перемещение между функционалом администртора
**Элемент управления**
**Действия**
- Кнопка "Записи" - Открывает DataGridWindow
- Кнопка "Продукты" - Открывает AdminProductWindow
- Кнопкаа "Статистика" - Открывает  StatisticsWindow
## 5. Схема переходов между формами
### Схема навигации

![alt text](<Диаграмма без названия.drawio.png>)
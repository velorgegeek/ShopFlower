# Техническое задание: [Магазин цветов]

**Студент:** Медведев Егор Евгеньевич

**Группа:** 2407сб2

---

## 1. Описание проекта

### 1.1 Название системы
Магазин цветов


### 1.2 Назначение
Система предназначена для автоматизации работы магазина цветов. Позволяет пользователям дистанционно купить цветы, регистрировать пользователей, управлять складом цветов, а также обрабатывать оплату подписок.

---

## 2. Функциональные требования

### 2.1 Основные функции системы

#### Функция 1: Продажа товара
- **Описание:** Пользователь выбирает понравившийся букет, выбирает кол-во цветов в букете(если можно), флорист собирает, пользователь оплачивает
- **Входные данные:** букет, пользователь
- **Результат:** Пользователь с букетом, со склада ушло сырье


#### Функция 2: Добавления товара
- **Описание:** Администратор добавляет новый товар через кнопку, товар может быть с разными кол-во цветов, титульник букета должнен быть оформлен(описание) 
- **Входные данные:** Нет
- **Результат:** Бд пополнилось новым товаром

#### Функция 3: Удаление товара
- **Описание:** Администратор удаляет товар через кнопку, товар удаляется из бд
- **Входные данные:** товар
- **Результат:** из бд удален товар

#### Функция 4: Редактирование товара
- **Описание:** Администратор редактирует товар, может изменять название, описание, размер, вариации, товар изменяется из бд
- **Входные данные:** товар
- **Результат:** в бд изменен букет
#### Функций 5: Статистика
- **Описание:** Администратор выводит статистику(линейная, диаграмма) по разным товарам/заказам
- **Входные данные:** Товары,заказы
- **Результат:** выведена статистика

#### Функция 6: Оплата товара
- **Описание:** Оплачивается покупка товара, пользователь оплачивает товар через оплату картой
- **Входные данные:** Номер карты,товар,который хотят купить, пользователь 
- **Результат:** Пользователь получает чек и в последствии товар


#### Функция 7: Оплата подписки
- **Описание:** Пользователь может оплатить годовую или месячную подписку на использование приложения букета. Выбирает тариф, вводит данные банковской карты (номер, срок действия, CVV). Система проверяет корректность данных, создаёт запись о платеже и, при успешной оплате, автоматически продлевает срок действия подписки.
- **Входные данные:** выбранный тариф, данные карты
- **Результат:** Платёж обработан, подписка продлена, создана запись в БД

---

## 3. Структура базы данных

### Таблица 1: Sale (Покупка)

**Описание:** для хранения заявки 

**Поля:**
- `id sale` (int, PK) — [индификатор]
- `id user`(int , FK) - [Уникальный идентификатор юзера]
- `DateCreate` (DateTime) — [Дата покупки]
**связи:**
-`id user` - user.id user cвязь один-ко-многим с таблицей `user`(Один клиент может быть во множество продажей)


### Таблица 2: products(Товар)
**Описание:** Хранит общую информацию о товаре
**Поля:**
- `id products` (int, PK) — уникальный идентификатор книги
- `name` (str) - имя продукта
- `id category`(int,FK) - [Уникальный ид категории]

**связи:**
- Связь один-ко-многим с таблицей `сategory product` (одна категория может у множество товаров)

### Таблица 3: ProductVariation(вариации продукта)
**Описание** Хранит вариации продуктов
- `id var`(int,PK) - Уникальный идентификатор вариации
- `id product`(int ,FK) - Уникальный идентификатор товара
- `price` (int) - цена товара
- `stock` (int) - Сколько осталось на складе

### Таблица 4: ProductAtribute(Атрибут продукта)
**Описание** Хранит атрибуты продукта
- `id atribute` (int,PK) - Уникальный ид атрибутов
- `id product`(int ,FK) - Уникальный идентификатор товара NULL
- `id var`(int,FK) - Уникальный идентификатор вариации NULL
- `name` (str) - Название
- `value` (str) - значение

### Таблица 5: category products(Категории товаров)
**Описание:** Хранит категорию товара
**Поля:**
- `id category`(int, PK) - уникальный идентификатор категории
- `name` (string) - [Название категории]

### Таблица 6: ProductsInSale(Товары в продажах)
**Описание:** Связывает таблицу товары и заказы
**Поля:**
- `id var` (int,FK) - [Уникальный ид вариации товара]
- `id sale` (int, FK) - [Уникальный ид покупки]
- `quantity`(int) - [Сколько товара в заказе]
- 
**Связи:**
- `id var` - ProductVariation.id var Связь один-ко-многим с таблицей `ProductVariation`
- `id sale` - sale.id sale  Связь один-ко-многим с таблицей `sale`


### Таблица 7: TypeTransaction (Тип транзакции)
**Описание:** Хранит возможные типы транзакций
**Поля:**
- `id type`(int, PK) - [Уникальный идентификатор типа транзакции]
- `Name type` (string) - Название транзакции

### Таблица 8: Trasaction (Транзации)
**Описание:** Хранит информацию о транзакциях
**Поля:**
- `id transaction`-(int, PK) - [Уникальный идентификатор транзакции]
- `id type` -(int,FK) - [Уникальный идентификатор типа транзакции]
- `id user` -(int,FK) - [Уникальный идентификатор юзера]
- `DataCrate` - (DateTime) - [Дата создания транзакции]

**Связи:**
- `id type`-TypeTransaction.id type cвязь один-ко-многим с таблицей `TypeTrasaction`(Один тип может быть во множество транзакций)
-`id user`-user.id user cвязь один-ко-многим с таблицей `user`(Один клиент может быть во множество транзакций)

### Таблица 9: User (Клиент)
**Описание:** хранение каждого юзера
**Поля:**
- `id user` (int, PK) - [Уникальный идентификатор юзера]
- `email` (string) - [Почта пользователя]
- `phone` (string) - [Телефон пользователя]
- `fio` (string) - [Фио пользователя]
- `HashPassword`(string) - [Пароль в виде хэша]


## 4. Основные формы приложения
#### Форма 9: AtributeAddWindow(Добавления  атрибута продукта)
**Назначение:** [Добавление атрибута в программу]
**Элементы управления:**
- ComboBox -[Выбор товара]
- TextBox - [Название атрибута]
- TextBox - [Значение атрибута]
- - **Действия:**
- Кнопка "[Добавить]" — [Добавляет в бд вариацию]
- Кнопка "[Закрыть]" — [Закрывает форму]
**Элементы управления:**
- ComboBox - [выбор товара]
- TextBox - [Цена]
- TextBox - [Остаток на складе]
- ComboBox - [Ид катеории]
- **Действия:**
- Кнопка "[Добавить]" — [Добавляет в бд вариацию]
- Кнопка "[Закрыть]" — [Закрывает форму]
#### Форма 8: VariationAddWindow [Добавления вариации]
**Назначение:** [Добавление вариации в программу]
**Элементы управления:**
- ComboBox - [выбор товара]
- TextBox - [Цена]
- TextBox - [Остаток на складе]
- ComboBox - [Ид катеории]
- **Действия:**
- Кнопка "[Добавить]" — [Добавляет в бд вариацию]
- Кнопка "[Закрыть]" — [Закрывает форму]
#### Форма 1: ProductAddWindow [Добавление продукта]

**Назначение:** [Добавление продукта в программу]

**Элементы управления:**
- TextBox - [название]
- TextBox - [Цена]
- TextBox - [Размер]
- TextBox - [Изображение]
- TextBox - [Остаток на складе]
- ComboBox - [Ид катеории]
- TextBox - [Описание]


- **Действия:**
- Кнопка "[Добавить]" — [Добавляет в бд продукт]
- Кнопка "[Закрыть]" — [Закрывает форму]
#### Форма 2: SaleAddWindow[Добавления продажи]
**Назначение:** [продажа товара]
**Элементы управления:**
- GridBox — отображение уже добавленных в корзину товаров

**Действия:**
- Кнопка "[Редактировать товар]" - редактирует товар
- Кнопка "[Добавить товар]" - добавляет товар
- Кнопка "[Удаляет товар]" - удаляет товар 
- Кнопка "[Купить]" — [Отправляет в форму оплаты]
- Кнопка "[В корзину]" — [Отправляет в корзину]

 #### Форма 3: ProductEditWindow [Редактирование букета]
 **Назначение:** [Редактирование инфорации о букете]
 **Элементы управления:**
- TextBox - [название]
- TextBox - [Цена]
- TextBox - [Размер]
- TextBox - [Изображение]
- TextBox - [Остаток на складе]
- ComboBox - [Ид катеории]
- TextBox - [Описание]

#### Форма 4: StatisticsWindow[Статистика]
**Назначение:** [Вывод статистики]
**Элементы управления**
-TextBox(Фильтрация) - [Товары]
-TextBox(Фильтрация) - [Заказы]
**Действия:**
-Кнопка "[Вывести]" -[Выводит статистику]
-Кнопка "[Закрыть]" - [Закрывает вкладку]

#### Форма 5: ProductsSaleAddWindow[Добавления товаров в продажу]
**Назначение:** [Добавление товара для продажи]
**Элементы управления**
- TextBox(Фильтрация) - [Фильтрация товаров]
- ListBox - [Вывод отфильтрованных товаров]

#### Форма 6: MainWindow (Главная форма)

**Назначение:** Главная форма приложения для администрация 

**Элементы управления:**
- DataGrid — отображение списков из базы данных
- TextBox (поиск) — поле для поиска заявок по букетам или ид
- TabControl — вкладки для разных разделов (Товар, Юзеры, Заявки)

**Действия:**
- Кнопка "Добавить юзера" - добавления юзера
- Кнопка "Редактировать юзера" - редактирует юзера
- Кнопка "Добавить заявку" - открывает окно добавления товара
- Кнопка "Редактировать заявку" - открывает окно редактирования заявки
- Кнопка "Добавить Товар" — открывает ProductAddWindow для создания нового товара
- Кнопка "Редактировать товар" — открывает ProductEditWindow для редактирования выбранной книги
- Кнопка "Удалить запись" — удаляет выбранную после подтверждения 

#### Форма 7: PaymentWindow (Форма оплаты)

**Назначение:** [Описание процесса оплаты]

**Элементы управления:**
- ComboBox (тариф) — выбор тарифа подписки/товара
- TextBox (номер карты) — ввод номера банковской карты
- TextBox (срок действия) — ввод срока действия карты (MM/YY)
- TextBox (CVV) — ввод кода безопасности
- TextBlock (сумма) — отображение суммы к оплате

**Действия:**
- Кнопка "Оплатить" — обработка платежа
- Кнопка "Отмена" — отмена операции


---

## 5. Схема переходов между формами
### Схема навигации

### При запуске приложения
**Запуск** → `MainWindow` (главная форма)

### Из MainWindow
**Секция "товар":**
- Кнопка "Добавить товары" → `ProductAddWindow` (режим создания товара)
- Кнопка "Редактировать товар" (выбран букет в списке) → `ProductEditWindow` (режим редактирования)
- Кнопка "Удалить товар" → диалог подтверждения → удаление, остаёмся на главной

**Секция "продажа":**
- Кнопка "Добавить Продажу" → `SaleAddWindow` (режим создания продажи)
- Кнопка "Редактировать Продажу" → `SaleEditWindow`
- кнопка   "Удалить продажу"  →  диалог подтверждения → удаление, остаёмся на главной

**Секция "Оплата":**
- Кнопка "Оплатить подписку" → `PaymentWindow`
- Показать информацию о текущих подписках
**Секция "Статистика":**
- Кнопка "Статистика" → `StatisticsWindow` (Режим вывода статистики)

#### Из StatisticsWindow
- Кнопка "Выбрать стастику" → показывает статистику которую мы выбрали → возврат на `MainWindow`
- Кнопка "Закрыть" → возврат на `MainWindow`
#### Из ProductAddWindow
- Кнопка "Сохранить" → сохранение данных → возврат на `MainWindow` (обновить/добавить список товаров)
- Кнопка "Отмена" → возврат на `MainWindow` без сохранения

#### Из SaleAddWindow
- Кнопка "Добавить товар" → Открытие `ProductsAddWindow`(Режим добавления товара)
- Кнопка "Редактировать товар" → Открытие `ProductsAddWindow`(Режим редактирования товара)
- Кнопка "Сохранить" → сохранение данных → возврат на `MainWindow` (обновить список продаж)
- Кнопка "Отмена" → возврат на `MainWindow` без сохранения

### Из ProductsEditWindow
- Кнопка "сохранить" → редактирование товара → возврат на `MainWindow`
- Кнопка "Отмена" → возврат на `MainWindow` без создания выдачи

### Из PaymentWindow
**Кнопка "Оплатить":**
- Успешная оплата → сообщение об успехе → возврат на `MainWindow`
- Неудачная оплата → сообщение об ошибке → остаёмся на `PaymentWindow`
**Кнопка "Отмена"** → возврат на `MainWindow` без оплаты

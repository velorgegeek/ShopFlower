# Техническое задание: [Магазин цветов]

**Студент:** Медведев Егор Евгеньевич

**Группа:** 2407сб2

---

## 1. Описание проекта

### 1.1 Название системы
Магазин цветов


### 1.2 Назначение
Система предназначена для автоматизации работы магазина цветов. Позволяет пользователям дистанционно купить цветы, регистрировать пользователей, управлять складом цветов, а также обрабатывать оплату заказа.

---

## 2. Функциональные требования

### 2.1 Основные функции системы

#### Функция 1: Управление каталогом товара
- **Описание:** Администратор добавляет, редактирует и удаляет товары из каталога
- **Входные данные:** товар
- **Результат:** обновленная бд товаров
  
### Функция 2: Оформление заказа
- **Описание** Пользователь выбирает товары, добавляет в корзину и оформляет заказ
- **Входные данные:** Пользователь, корзина с товарами
- **Результат** Созданный заказ

#### Функций 3: Статистика
- **Описание:** Администратор выводит статистику(линейная, диаграмма) по разным товарам/заказам
- **Входные данные:** Товары,заказы
- **Результат:** выведена статистика

#### Функция 4: Оплата товара
- **Описание:** Оплачивается покупка товара, пользователь оплачивает товар через оплату картой
- **Входные данные:** Номер карты,товары,которые хочет купить, пользователь 
- **Результат:** Пользователь получает чек и в последствии товар
  

---

## 3. Структура базы данных

### Таблица 1: Sale (Покупка)

**Описание:** для хранения заявки 

**Поля:**
- `id sale` (int, PK) — [идентификатор покупки]
- `id user`(int , FK) - [Уникальный идентификатор юзера]
- `DateCreate` (DateTime) — [Дата покупки]
- `status` (str) - [Статус заказа]
- `total amount`(int) -[общая сумма покупки]

**связи:**
-`id user` - user.id user cвязь один-ко-многим с таблицей `user`(Один клиент может быть во множество продажей)


### Таблица 2: products(Товар)
**Описание:** Хранит общую информацию о товаре
**Поля:**
- `id products` (int, PK) — [уникальный идентификатор товара]
- `name` (str) - [имя продукта]
- `id category`(int,FK) - [Уникальный ид категории]

**связи:**
- Связь один-ко-многим с таблицей `сategory product` (одна категория может у множество товаров)

### Таблица 3: ProductVariation(вариации продукта)
**Описание** Хранит вариации продуктов
- `id var`(int,PK) - Уникальный идентификатор вариации
- `id product`(int ,FK) - Уникальный идентификатор товара
- `price` (int) - цена товара
- `stock` (int) - Сколько осталось на складе
- `image_url` (str) - Ссылка на фотографию

### Таблица 4: ProductAtribute(Атрибут продукта)
**Описание** Хранит атрибуты продукта
- `id_attribute` (int,PK) - Уникальный ид атрибутов
- `id var`(int,FK) - Уникальный идентификатор вариации 
- `id product` (int,FK) - Уникальный идентификатор товара
- `name` (str) - Название
- `value` (str) - значение

### Таблица 5: category products(Категории товаров)
**Описание:** Хранит категорию товара
**Поля:**
- `id category`(int, PK) - уникальный идентификатор категории
- `name` (string) - [Название категории]

### Таблица 6: ProductsInSale(Товары в продажах)
**Описание:** Связывает таблицу товары и заказы
**Поля:**
- `id var` (int,FK) - [Уникальный ид вариации товара]
- `id sale` (int, FK) - [Уникальный ид покупки]
- `quantity`(int) - [Сколько товара в заказе]
- 
**Связи:**
- `id var` - ProductVariation.id var Связь один-ко-многим с таблицей `ProductVariation`
- `id sale` - sale.id sale  Связь один-ко-многим с таблицей `sale`


### Таблица 7: Transaction (Транзации)
**Описание:** Хранит информацию о транзакциях
**Поля:**
- `id transaction`-(int, PK) - [Уникальный идентификатор транзакции]
- `type transaction` - (str) - [Тип транзакции]
- `id user` -(int,FK) - [Уникальный идентификатор юзера]
- `id sale` - (int,FK) - [Уникальный идентификатор заказа]
- `DataCreate` - (DateTime) - [Дата создания транзакции]

**Связи:**
- `id user`-user.id user cвязь один-ко-многим с таблицей `user`(Один клиент может быть во множество транзакций)
- `id sale` - sale.id sale cвязь один-к-одному с таблицей `id sale`(Одна продажа может иметь одну транзакцию) 


### Таблица 8: User (Клиент)
**Описание:** хранение каждого юзера
**Поля:**
- `id user` (int, PK) - [Уникальный идентификатор юзера]
- `email` (string) - [Почта пользователя]
- `phone` (string) - [Телефон пользователя]
- `fio` (string) - [Фио пользователя]
- `HashPassword`(string) - [Пароль в виде хэша]
- `Роль` - [Роль пользователя]


## 4. Основные формы приложения

#### Форма 1: ProductCatalogWindow
**Назначение:** [Просмотр возможных продуктов для покупки]
**Элементы управления**
- ListBox -[Отображение продуктов]
 **Действия**
- При нажатии на товар открывает окно товара

#### Форма 2: ProductCard
**Назначение:**[Детальный просмотр карточки товара]
**Элементы управления**
- TextBlock - [Название товара]
- image - [Фотография товара]
- RadioButton - [Для выбора вариации]
**Действия**
- Кнопка "[Добавить в корзину]" - Добавляет в корзину продукт
- Кнопка "[Купить]" - открывает форму с корзиной
- Кнопка "[Перейти в корзину]" - открывает форму с козиной с юзер корзиной

#### Форма 3: ShoppingCard
**Назначение** [Корзина для оплаты]
**Элементы управления**
- ListBox - [Для отображения товаров]
- TextBlock - [Название товара]
- TextBlock - [Кол-во товара]
**Действия**
-Кнопка "[+]" - Добавляет значение этого товара в корзине
-Кнопка "[-]" - Уменьшает значение этого товара
-Кнопка "Оплатить" - перебрасывает на оплату
#### Форма 4: PaymentWindow
**Назначение** [Оплата]
**Элементы управления**
- TextBox - [Номер карта]
- TextBox - [Месяц годности карты]
- TextBox - [Год карты]
- TextBox - [CVС]
- TextBox - [Стоймость заказа]
**Действия**
- Кнопка "Заплатить" - Производит оплату
- Кнопка "Отмена" - Закрывает форму
#### Форма 5: DataGridWindow[Записи]
**Назначение** [Показывать записи]
**Элементы управления**
- TabControl - [Перемещение между DataGrid]
- DataGrid - [Вывод записей]
**Действия**
- Кнопка "Закрыть" - закрывает форму
#### Форма 6: StatisticsWindow[Статистика]
**Назначение:** [Вывод статистики]
**Элементы управления**
- ComboBox - [тип отчета]
- DatePicker - [выбор начала для фильтра]
- DatePicker - [выбор конца для фильтра]
- PlotView - [Место для графиков]
**Действия:**
-Кнопка "[применить фильтр]" -[Выводит статистику по этому фильтру]
-Кнопка "[сбросить]" - [сбрасывает фильтры]
-Кнопка "[Закрыть]" - [Закрывает форму]

### Форма 7: AuthWindow[Авторизация]
**Назначение** [Вход пользователя в программу]
**Элементы управленияе**
- TextBlock - [Логин]
- PasswordBox -[Пароль]
**Действия:**
- Кнопка "Войти" - [Вход в приложение]
- Кнопка "Зарегестрироваться" - [регистрация нового пользователя]
### Форма 8: RegistrationWindow[Регистрация]
**Элемент управления**


#### Форма 6: MainWindow (Главная форма)

**Назначение:** Главная форма приложения для администрация 

**Элементы управления:**
- Button - [перекидывает на другую форму]

**Действия:**
- Кнопка "Войти" - позволяет войти в аунтефикацию
---

## 5. Схема переходов между формами
### Схема навигации

### При запуске приложения
**Запуск** → `MainWindow` (главная форма)

### Из MainWindow
**Секция "товар":**
- Кнопка "Добавить товары" → `ProductAddWindow` (режим создания товара)
- Кнопка "Редактировать товар" (выбран букет в списке) → `ProductEditWindow` (режим редактирования)
- Кнопка "Удалить товар" → диалог подтверждения → удаление, остаёмся на главной

**Секция "продажа":**
- Кнопка "Добавить Продажу" → `SaleAddWindow` (режим создания продажи)
- Кнопка "Редактировать Продажу" → `SaleEditWindow`
- кнопка   "Удалить продажу"  →  диалог подтверждения → удаление, остаёмся на главной

**Секция "Статистика":**
- Кнопка "Статистика" → `StatisticsWindow` (Режим вывода статистики)

#### Из StatisticsWindow
- Кнопка "Выбрать статистику" → показывает статистику которую мы выбрали → возврат на `MainWindow`
- Кнопка "Закрыть" → возврат на `MainWindow`
#### Из ProductAddWindow
- Кнопка "Сохранить" → сохранение данных → возврат на `MainWindow` (обновить/добавить список товаров)
- Кнопка "Отмена" → возврат на `MainWindow` без сохранения

#### Из SaleAddWindow
- Кнопка "Добавить товар" → Открытие `ProductsAddWindow`(Режим добавления товара)
- Кнопка "Редактировать товар" → Открытие `ProductsAddWindow`(Режим редактирования товара)
- Кнопка "Сохранить" → сохранение данных → возврат на `MainWindow` (обновить список продаж)
- Кнопка "Отмена" → возврат на `MainWindow` без сохранения

### Из ProductsEditWindow
- Кнопка "сохранить" → редактирование товара → возврат на `MainWindow`
- Кнопка "Отмена" → возврат на `MainWindow` без создания выдачи

### Из PaymentWindow
**Кнопка "Оплатить":**
- Успешная оплата → сообщение об успехе → возврат на `MainWindow`
- Неудачная оплата → сообщение об ошибке → остаёмся на `PaymentWindow`
**Кнопка "Отмена"** → возврат на `MainWindow` без оплаты
